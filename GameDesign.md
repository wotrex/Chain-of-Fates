# Chain of Fates
"Ланцюг доль" / "Chain of Fates" Підкреслює взаємопов'язаність життів людей, що залежить від рішень, випадковостей і подій у місті.
## Жанр і сеттінг 

Жанрами гри є:
* містобудівництво
* стратегія
* симулятор

Сеттінгом гри є середньовіччя.

Ігри зі схожими жанрами та сеттінгом: 
* Stronghold Crusader 
* Manor Lords
* Kingdom Two Crowns
* Diplomacy is Not an Option

Основна ідея гри це виживання в середньовічном світі, де потрібно будувати своє місто і дбати про благо його жителів. 
На місто регулярно будуть нападати різні армії ворогів. 
Однак гравець може зіткнутися і з іншими проблемами, такими як хвороби, нестача їжі, злочинність.

***
## Стиль гри
Стиль представляє собою низькополігональні моделі.
На зображеннях представлено декілька стилів, сподіваюся 3d модельєр зробить щось середнє між ними.
По настрою і атмосфері гра повинна бути близько до зображень 8, 9, 10, 11, 12.
<!-- ### Стиль 1 -->
| Image 1 |
|:--:| 
| ![Image 1](https://gamefabrique.com/screenshots2/pc/diplomacy-is-not-an-option-03.big.jpg) |

| Image 2 |
|:--:| 
| ![Image 2](https://i.ytimg.com/vi/vRUVHhMxgwE/hq720.jpg?sqp=-oaymwEhCK4FEIIDSFryq4qpAxMIARUAAAAAGAElAADIQj0AgKJD&rs=AOn4CLDx1MJ7MZnpsUBnfQDMSzdBpATcXg) |

| Image 3 |
|:--:| 
| ![Image 3](https://preview.redd.it/899z146q2nv21.png?auto=webp&s=930ce1ef392e4ffb5789470a317cb04c0340e9f3) |

| Image 4 |
|:--:| 
| ![Image 4](https://img.craftpix.net/2021/02/Free-Medieval-3D-People-Low-Poly-Models.webp) |

| Image 5 |
|:--:| 
| ![Image 5](https://img.craftpix.net/2020/09/Medieval-Buildings-3D-Pack-360x240.webp) |

| Image 6 |
|:--:| 
| ![Image 6](https://img.craftpix.net/2020/11/Medieval-Fortress-Pack-3D-Low-Poly-Models-360x240.webp) |

| Image 7 |
|:--:| 
| ![Image 7](https://img.craftpix.net/2020/08/Free-Medieval-Houses-3D-Low-Poly-Pack-01-360x240.webp) |

| Image 8 |
|:--:| 
| ![Image 8](https://img.freepik.com/premium-photo/low-poly-style-3d-render-medieval-village_14117-960994.jpg) |

| Image 9 |
|:--:| 
| ![Image 9](https://img.freepik.com/premium-photo/lowpoly-style-3d-rendering-medieval-castle-courtyard-with-bird-flying-overhead_14117-1000800.jpg) |

| Image 10 |
|:--:| 
| ![Image 10](https://cdn1.epicgames.com/ue/product/Screenshot/Map51-1920x1080-c2eed310e5f4465338a0c30230dd503a.jpg?resize=1&w=1920) |

| Image 11 |
|:--:| 
| ![Image 11](https://images.squarespace-cdn.com/content/v1/541d868ce4b0c158abe9c5f3/1526725405654-D0QAOJWEJJRNO4RDUW2A/RPG_Medieval_Kingdom_Kit_66.jpeg) |

| Image 12 |
|:--:| 
| ![Image 12](https://img.freepik.com/premium-photo/lost-treasures-mysterious-isometric-pirate-cove-unforgiving-rpg-town-hauntingly-beautif_983420-7508.jpg) |

| Image 13 |
|:--:| 
| ![Image 13](https://i.ytimg.com/vi/o2kVQ-Y2MqU/maxresdefault.jpg) |

| Image 14 |
|:--:| 
| ![Image 14](https://artline.ua/storage/images/editor/editor_162591119148932_0.jpg) |

***

Світ гри представляє собою одну велику але обмежену природну локацію, в центрі якої знаходиться місто.
На локації розкидані різні ресурси. 
Люди(якими ви напряму не керуєте) збирають ресурси, носять вантаж, будують будівлі, займаються своїми справами.
Для будування певної будівлі потрібні певні ресурси.
Різні будівлі і професії пов'язані з цією будівлею(в будівлі повинен хтось працювати) виробляють різні ресурси або добувають щось.
Для виробництва деяких ресурсів потрібні інші ресурси.
Також люди мають потреби. Найважливіша потреба це їжа. Якщо не задовольняти потреби, то в місті буде рости злочинність. 
А довга нестача їжі приведе до голоду і навіть смерті.
Окрім їжі людям потрібні і інші речі. Такі як одяг, розваги, відпочинок та інше.
В грі є зміна дня і ночі. Люди не можуть працювати весь час і їм треба відпочинок. Вечером люди розходяться по домівкам і вже вночі лягають спати.
Так ці всі потреби впливають на настрій людей. 
Якщо настрій людей високий, то населення буде рости, а якщо низьким, то їхня ефективність роботи буде не максимальною і повиситься злочинність.


Чим багатше стає місто, тим більші армії приходять на його захоплення.
Під час нападу великих полчищ ворогів люди ховаються в домівках, а солдати займають позиції на кам'яних стінах та біля воріт.
Вороги атакують з будь-якої сторони. Вони можуть атакувати з декількох сторін одночасно. Вони йдуть до воріт щоб їх зламати і зайти в місто.
Також іноді в них може бути облогові драбини або катапульти, тому іноді доведеться тримати декілька проходів. 
Снаряди катапульт можуть влучити в будівлі і пошкодити їх.
Так як це середньовіччя, основна зброя це мечі, списи, луки, арбалети та інше. Також воїни можуть мати різну броню.
Для захисту міста ці всі речі доведеться виробляти. Втрати під час нападу можуть вплинути на настрій населення.
Атаки на місто будуть виглядати приблизно як в грі Diplomacy is Not an Option, але повинні виглядати трохи більш серйозно. Наприклад вороги не будуть розлітатися так високо і далеко. Можливо вороги не будуть іти кучою, а розділяться на загони.
| Як будуть приблизно виглядати облоги |
|:--:| 
| ![Image 1](https://shared.fastly.steamstatic.com/store_item_assets/steam/apps/1272320/ss_8445452856adbc856f2ee9d1a4c5c36c1f04cbf9.600x338.jpg?t=1736844560) |
| ![Image 2](https://shared.fastly.steamstatic.com/store_item_assets/steam/apps/1272320/ss_49d5b616e90c1540abe95a2da803ad7a797dd7b6.600x338.jpg?t=1736844560) |
| ![Image 31](https://www.gamesidestory.com/wp-content/uploads/2022/03/ss_3829c9541fbaab7b8cd557bf571067c28aefe640.1920x1080.jpg) |
| ![gif](https://shared.fastly.steamstatic.com/store_item_assets/steam/apps/1272320/extras/1_the_law_of_war_opt.gif?t=1736844560) |

***
## 	Системи та механіки
На початку гри створюється плоска(покищо) мапа, на якій випадково розміщуються такі об'єкти:

1. <span id="tree" style="color:green">Дерево</span>
2. <span id="river" style="color:aqua">Річка</span>
3. <span id="stones" style="color:grey">Каміння</span>
4. <span id="grass" style="color:lime">Трава</span>
5. <span id="lake" style="color:Aqua">Озеро</span>
6. <span id="berries" style="color:Fuchsia">Ягоди</span>
7. <span id="iron" style="color:Brown">Поклади заліза</span>

Кількість кожного об'єкта буде визначатися в [параметрах](#параметри-гри).

В центрі мапи спавняться табір(намети для жителів), `КІЛЬКІСТЬ ЖИТЕЛІВ НА СТАРТІ` кількість [жителів](#dweller) та початкові ресурси(зберігаються в спеціальном наметі, але його розмір дуже обмежений). При створенні, [жителі](#dweller) мають випадкові параметри [імені](#dweller-name) та [віку](#dweller-age).

В грі має бути система часу, зміни дня і ночі.
* 1 година = `КІЛЬКІСТЬ ТІКІВ` тіків.
* 1 день = 24 години.
* 1 сезон = `КІЛЬКІСТЬ ДНІВ В СЕЗОНІ` днів.
* 1 рік = 4 сезона.

Сезони поки що ніяк не впливають на гру. Кожен рік [вік](#dweller-age) усіх [жителів](#dweller) збільшується на 1.
День ділиться на ранок, середина дня, вечір, ніч. Години кожного проміжку дня вказано в [параметрах](#параметри-гри).
В грі має бути можливість ставити час на паузу.

### **Житель**
<span id="dweller">**Житель**</span>.
Гравець напряму не управляє жителями.
Жителі виконують задачі, які визначаються їхньою професією. Якщо у жителя нема професії, то він виконує назначене будівництво.

Житель має такі параметри:
* <span id="dweller-name">**Ім'я**</span> - відброжається як його звати. Визначається випадково.
* <span id="dweller-age">**Вік**</span> - скільки років жителю. Значення за замовчуванням в [параметрах гри](#параметри-гри). Визначається випадково лише при створенні перших жителів на початку гри. В [параметрах гри](#параметри-гри) визначається мін. та макс. значення для генерації віку. Вік підвищується кожен рік у всіх одночасно(Щоб не нагружати гру ще датами народження кожного жителя).Коли вік >= `ВІК ДЛЯ СТАРОСТІ` років - впливає на параметри:
    * Максимальна витривалість *= `d1`%
    * Ефективність роботи -= `d2`%
    * Швидкість *= `d3`%
* **Максимальна витривалість** - максимум витривалості який може бути у жителя. Стандартне значення `МАКСИМАЛЬНА ВИТРИВАЛІСТЬ`. На цей параметр впливають параметри "вік" та "голод".
* <span id="dweller-endurance">**Витривалість**</span> - цей параметр зменшується на `ЗНАЧЕННЯ ВТОМИ` коли житель виконує роботу і збільшується на `ЗНАЧЕННЯ ВІДПОЧИНКУ` коли житель в стані відпочинку. Це значення не може бути вище значення "максимальна витривалість". Стандартне значення = "максимальна витривалість". Коли це значення падає нижче mnE значення, то це впливає на параметри:
    * Ефективність роботи -= `d4`% / витривалість
    * Швидкість -= `d5` / витривалість
    * Настрій -= `d6` / витривалість
* <span id="work-efficiency">**Ефективніть роботи %**</span> - це параметр відповідає за швидкість виконання будь-якої роботи. Стандартне значення `СТАНДАРТНА ВИТРИВАЛІСТЬ`. На цей параметр впливають параметри "вік" та "витривалість".
* <span id="dweller-speed">**Швидкість**</span> - швидкість руху жителя. Стандартне значення `СТАНДАРТНА ШВИДКІСТЬ`. На цей параметр впливають параметри "вік" та "витривалість".
* **Рівень достатку** - всього є `КІЛЬКІСТЬ РІВНІВ ДОСТАТКУ` рівнів достатку. Кожен рівень відповідає за потреби жителя. Чим більше рівень, тим більші потреби. Стандртне значення `НАЙНИЖЧИЙ РІВЕНЬ ДОСТАТКУ`.
* **Кількість очків до наступного рівня достатку** - значення, яке збільшується на `ПРИРІСТ ДОСТАТКУ ЗА ВИКОНАНУ РОБОТУ` за виконану роботу жителя. Якщо це значення >= "потрібної кількості очків до наступного рівня достатку", то "рівень достатку" збільшується, а це значення обнуляється. Коли це значення <= 0, то "рівень достатку" зменшується, а до цього значення додається значення "потрібна кількість очків до наступного рівня достатку"(після зменшення рівня достатку).
* **Потрібна кількість очків до наступного рівня достатку** - це значення залежить від "рівня достатку". Чим більший рівень достатку, тим більше це значення.
* **Кількість очків достатку за `НЕОБХІДНА КІЛЬКІСТЬ ДНІВ ДЛЯ ДОСТАТКА` днів** - якщо за `НЕОБХІДНА КІЛЬКІСТЬ ДНІВ ДЛЯ ДОСТАТКА` днів це значення не досягне значення `МІНІМАЛЬНИЙ ОТРИМАНИЙ ДОСТАТОК ЗА ПРОМІЖОК ЧАСУ`, то значення кількості очків до наступного рівня достатку зменшується на `КІЛЬКІСТЬ ВТРАЧЕНИХ ОЧКІВ ДОСТАТКУ`.
* **Голод** - кожному жителю потрібна їжа. Стандарне значення `БАЗОВИЙ ГОЛОД`. Кожен день один житель споживає мінімум одну одиницю їжі. Якщо житель спожив їжу, то це значення скидається до стандартного. Якщо житель не спожив їжу, то це значення зменшується на 1. Коли це значення = 0, то житель померає. Коли це значення падає нижче `1 РІВЕНЬ ГОЛОДУ` значення, то це впливає на параметри:
    * Максимальна витривалість *= `d7`%
    * Настрій -= `d8`
    
    Коли це значення падає нижче `2 РІВЕНЬ ГОЛОДУ` значення, то це впливає на параметри:
    * Максимальна витривалість *= `d9`%
    * Настрій -= `d10`
* **Настрій** - значення цього параметру впливає на поведінку жителя. Якщо середній настрій всіх жителів буде >= `НАСТРІЙ ДЛЯ НОВОГО ЖИТЕЛЯ`, то в поселення будуть приходить жителі. На цей параметр впливають параметри "витривалості" та "голоду", а також задоволення потреб. Якщо потреба задоволена, то значення цього параметру =+ `ПОЗИТИВНИЙ ЕФФЕКТ ВІД ПОТРЕБИ`, якщо потреба не задоволена, то то значення цього параметру =- `НЕГАТИВНИЙ ЕФФЕКТ ВІД ПОТРЕБИ`. Значення цього параметру розраховується сукупністю всіх позитивних і негативних еффектів. Якщо неяких ефектів нема, то це значення = 0.
* <span id="delivery-inventory">**Інвентар для доставки**</span> - слот в якому знаходься ресурси/предмети, які жителю потрібно перенести. В цьому слоті може бути тільки один предмет/ресурс, але його максимальна кількість визначається так: вага * кількість <= `МАКСИМАЛЬНА ПЕРЕНОСИМА ВАГА`. Цей параметр потрібний для дій: [ходьба](#walking), [взяти предмет](#take-the-object), [покласти предмет](#to-put-an-object). Від ресурсів/предметів що знаходиться в цьому слоті залежить анімація ходьби. Стандартне значення: порожній.
* **Професія** - назва професії та координати будинку з професією. Професія визначає цілі жителя. [Список професій](#професії). Стандартне значення: [безробітний](#unemployed).
* **Житло** - параметр, який містить інформацію про житло жителя(місце знаходження житла). Стандартне значення: без житла.
* **Стан** - від цього параметра залежать цілі жителя. Всього є декілька станів:
    1. Відпочинок - стандартний стан. В цьому стані житель не виконує роботу і трохи відновлює витривалість.
    2. Робота - стан коли житель виконує цілі, які визначаються його професією.
    3. Очікування роботи - стан який завжди має ідентичний розклад з станом робота. 
    Коли в стані робота нема завдань, то житель переходить в цей стан. 
    Загалом цей стан має ті самі цілі/завдання що і стан відпочинок.
    Коли в його професії з'являються завданя він відразу переходить в стан Робота.
    4. Сон - стан, в якому житель йде додому і спить. 
    Цей стан має обмеження - його кількість годин в день його розклада не може бути більше sleepStateTime.
    5. Небезпека - унікальний стан, який не має розклад. 
    Житель переходить в цей стан у разі якойсь загрози(напад ворогів) терміново, тобто житель відразу відміняє свої цілі і виконує цілі цього стану.
    Під час цього стану житель ховається. 

    Безробітні не мають станів "робота" та "очікування роботи".
    Для кожного стану є розклад(окрім стану "Небезпека") - в якусь годину житель переходе з одного стану в інший. Розклад в [параметрах](#параметри-гри).
    Розклад для кожної професії може змінюватися в будівлі цієї професії, тому як тільки житель отримав професію - його розклад визначається будівлею, де він працює.
    Житель не може перейти з стану "робота" в інший стан(окрім стану "Небезпека"), поки не виконає поточні цілі.
    
    Якщо в стані "робота" немає цілей, то житель переходить в стан "очікування роботи".
#### Поведінка
Поведінка жителя складається з дій. Дії залежать від задачі. Задача залежить від стану.

<span id="walking">**Ходьба | W (*Walking*)**</span> - унікальна дія, переміщення жителя. На швидкість переміщення впливає параметр жителя [швидкість](#dweller-speed). 
Ця дія завжди має пункт призначення(координати), куди житель має дістатися. Також в цій дії має бути перевірка на ресурс/предмет в [інвентарі для доставки](#delivery-inventory). Якщо інвентар порожній, то виконується звичайна анімація ходьби. Якщо в інвентарі є ресурс/предмет, то буде виконуватися анімація в залежності від ресурса/предмета в інвентарі, також якщо дія ходьби раптово відміниться, то житель викидає ресурс/предмет на землю. Вага ресурса/предмета в інвентарі буде впливати на [швидкість](#dweller-speed)(буде його сповільнювати) та [витривалість](#dweller-endurance)(віднімати цей показник) жителя, а відсутність ресурса/предмета в інвентарі не впливає на ці показники. 
```
ТУТ ЯКАСЬ ФОРМУЛА РОЗРАХУНКУ ВПЛИВА ВАГИ ПРЕДМЕТА НА ШВИДКІСТЬ ТА ВИТРИВАЛІСТЬ
```
Коли житель прибуде в пункт призначення ця дія буде виконана.

<!-- **Доставка товару | D (*Delivery*)** - та сама ходьба, але житель має в інвентарі якийсь ресурс/предмет. 
Зазвичай він має доставити ресурс/предмет до якоїсь будівліі після прибуття до цієї будівлі, ресурс/предмет переміщується з інвентаря жителя в інвентар будівлі. Може відрізнятися анімація в залежності від ресурса/предмета.
Якщо дія раптово відміниться, то житель викидає ресурс/предмет на землю.

Загалом можна зробити що **W** і **D** - одна дія, просто перевіряти чи є в інвентарі жителя якийсь ресурс/предмет.
Якщо нема, то виконується звичайна анімація ходьби. Якщо є, то виконується відповідна анімація і перед відміною цієї дії ресурс/предмет викидується з інвентаря жителя. -->
Інші дії представляють собою виконання чогось на одному місті. В кожной із них є свій час виконання та затрати [витривалості](#dweller-endurance)(витривалість забирається на початку виконання дії, а не в кінці). На час виконання дії впливає [ефективність роботи](#work-efficiency)(Час виконання *= ефективність роботи). Кожна дія відрізняється анімацією. Деякі дії використовують або створюють ресурс/предмет в [інвентарі для доставки](#delivery-inventory) жителя. Деякі дії взаємодіють з об'єктами на карті(дерева, каміння поклади заліза і т.д.) та змінюють їхні параметри, об'єкт обов'язково повинен знаходитися поруч. Дія завершається тоді, коли завершиться таймер виконання цієї дії.

Також ще три особливих дії пов'язані з ресурсом/предметом в [інвентарі для доставки](#delivery-inventory) жителя це **взяти предмет** та **покласти предмет**, **увійти в будівлю**.

<span id="take-the-object">**Взяти предмет | TO (*Take the Object*)**</span> - ця дія дозволяє взяти ресурс/предмет з інвентаря будівлі або землі. Ресурс/предмет або будівля з ним повинні знаходитися близько до жителя в радіусі `РАДІУС ДЛЯ ПІДНЯТТЯ ПРЕДМЕТА`, щоб житель міг взяти його, інашке дія завершується. Якщо в жителя в інвентарі вже є інша річ, то вона викидається. Якщо в жителя в інвентарі вже є річ яку він бере, то береться певна кількість, яка не перевищує максимальну вагу(вага предмета * кількість <= `МАКСИМАЛЬНА ПЕРЕНОСИМА ВАГА`).  Ця дія завжди приймає значення ЩО за ресурс/предмет, який треба підібрати. Якщо не вказано який ресурс треба взяти, то береться перший або випадковий ресурс близько.

<span id="to-put-an-object">**Покласти предмет | PO (*to Put the Object*)**</span> - кладе в будівлю або на землю ресурс/предмет, який знаходиться в [інвентарі](#delivery-inventory). Якщо житель знаходиться в будівлі, то ресурс/предмет переміщується в інвентар будівлі. Якщо житель знаходиться не в будівлі, то ресурс/предмет переміщується на землю.

Час виконання для **взяти предмет** та **покласти предмет** однаковий - `ЧАС для В/П предмет`. Витривалість ці дві дії не змінюють.

**Увійти в будівлю. | EB (*Enter the Building*)** - дія для входу жителя в будівлю. Щоб увійти в будівлю потрібно знаходитися близько до неї, інакше нічого не відбудеться. Коли житель входить - він з'являється в списку тих, хто знаходиться в будівлі. Ця дія не має час виконання та вплив на витривалість.

Якщо житель знаходиться в будівлі, то дія виходу з будівлі повинна виконуватися автоматично, коли виконується дія [ходьби](#walking). Житель спавниться біля входу в будинок і видаляється з списку тих, хто знаходиться в будівлі.

Інші дії:
| Дія    | Позначення | Час виконання | Витривалість +/-   | Потрібний ресурс | Створюваний ресурс | Взаємодія з об'єктом | Короткий опис                   |
|--------|------------|---------------|--------------------|------------------|--------------------|----------------------|---------------------------------|
| Релакс | R(Relax)   | `RelaxTime`   | +`Relax endurance` |                  |                    |                      | Розслаблення на свіжому повітрі |
|        |            |               |                    |                  |                    |                      |                                 |
|        |            |               |                    |                  |                    |                      |                                 |